{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Box,Paper,TextField,Button,Typography,List,ListItem,ListItemText,Divider}from'@mui/material';import axios from'axios';import io from'socket.io-client';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_BASE_URL||'http://localhost:8000';function ChatInterface(){const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[isConnected,setIsConnected]=useState(false);const socketRef=useRef(null);const messagesEndRef=useRef(null);useEffect(()=>{// Connect to WebSocket for real-time updates\nsocketRef.current=io(API_BASE_URL);socketRef.current.on('connect',()=>{setIsConnected(true);});socketRef.current.on('disconnect',()=>{setIsConnected(false);});socketRef.current.on('message',message=>{setMessages(prev=>[...prev,{text:message,sender:'ai',timestamp:new Date()}]);});return()=>{socketRef.current.disconnect();};},[]);useEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);const sendMessage=async()=>{if(!input.trim())return;const userMessage={text:input,sender:'user',timestamp:new Date()};setMessages(prev=>[...prev,userMessage]);try{const response=await axios.post(\"\".concat(API_BASE_URL,\"/chat\"),{message:input,context:messages.slice(-10)// Send last 10 messages for context\n},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});const aiMessage={text:response.data.response,sender:'ai',timestamp:new Date()};setMessages(prev=>[...prev,aiMessage]);}catch(error){console.error('Error sending message:',error);const errorMessage={text:'Error: Could not send message. Please check authentication.',sender:'system',timestamp:new Date()};setMessages(prev=>[...prev,errorMessage]);}setInput('');};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}};return/*#__PURE__*/_jsxs(Paper,{sx:{p:2,height:'70vh',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,children:[\"Chat with AI Orchestrator\",isConnected?' (Connected)':' (Disconnected)']}),/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1,overflow:'auto',mb:2},children:/*#__PURE__*/_jsxs(List,{children:[messages.map((message,index)=>/*#__PURE__*/_jsx(ListItem,{sx:{alignItems:'flex-start'},children:/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:message.sender==='user'?'primary':'secondary',children:message.sender==='user'?'You':message.sender==='ai'?'AI Orchestrator':'System'}),secondary:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{whiteSpace:'pre-wrap'},children:message.text})})},index)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})}),/*#__PURE__*/_jsx(Divider,{sx:{mb:2}}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:2,value:input,onChange:e=>setInput(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Discuss project requirements with the AI...\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:sendMessage,disabled:!input.trim(),children:\"Send\"})]})]});}export default ChatInterface;","map":{"version":3,"names":["React","useState","useEffect","useRef","Box","Paper","TextField","Button","Typography","List","ListItem","ListItemText","Divider","axios","io","jsxs","_jsxs","jsx","_jsx","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","ChatInterface","messages","setMessages","input","setInput","isConnected","setIsConnected","socketRef","messagesEndRef","current","on","message","prev","text","sender","timestamp","Date","disconnect","_messagesEndRef$curre","scrollIntoView","behavior","sendMessage","trim","userMessage","response","post","concat","context","slice","headers","Authorization","localStorage","getItem","aiMessage","data","error","console","errorMessage","handleKeyPress","e","key","shiftKey","preventDefault","sx","p","height","display","flexDirection","children","variant","gutterBottom","flexGrow","overflow","mb","map","index","alignItems","primary","color","secondary","whiteSpace","ref","gap","fullWidth","multiline","rows","value","onChange","target","onKeyPress","placeholder","onClick","disabled"],"sources":["C:/Users/dmilner.AGV-040318-PC/Downloads/landon/ai_final/agentic-framework-main/dashboard/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Box, Paper, TextField, Button, Typography, List, ListItem, ListItemText, Divider } from '@mui/material';\r\nimport axios from 'axios';\r\nimport io from 'socket.io-client';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000';\r\n\r\nfunction ChatInterface() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const socketRef = useRef(null);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // Connect to WebSocket for real-time updates\r\n    socketRef.current = io(API_BASE_URL);\r\n\r\n    socketRef.current.on('connect', () => {\r\n      setIsConnected(true);\r\n    });\r\n\r\n    socketRef.current.on('disconnect', () => {\r\n      setIsConnected(false);\r\n    });\r\n\r\n    socketRef.current.on('message', (message) => {\r\n      setMessages(prev => [...prev, { text: message, sender: 'ai', timestamp: new Date() }]);\r\n    });\r\n\r\n    return () => {\r\n      socketRef.current.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  const sendMessage = async () => {\r\n    if (!input.trim()) return;\r\n\r\n    const userMessage = { text: input, sender: 'user', timestamp: new Date() };\r\n    setMessages(prev => [...prev, userMessage]);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_BASE_URL}/chat`, {\r\n        message: input,\r\n        context: messages.slice(-10) // Send last 10 messages for context\r\n      }, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n\r\n      const aiMessage = { text: response.data.response, sender: 'ai', timestamp: new Date() };\r\n      setMessages(prev => [...prev, aiMessage]);\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      const errorMessage = { text: 'Error: Could not send message. Please check authentication.', sender: 'system', timestamp: new Date() };\r\n      setMessages(prev => [...prev, errorMessage]);\r\n    }\r\n\r\n    setInput('');\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper sx={{ p: 2, height: '70vh', display: 'flex', flexDirection: 'column' }}>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Chat with AI Orchestrator\r\n        {isConnected ? ' (Connected)' : ' (Disconnected)'}\r\n      </Typography>\r\n\r\n      <Box sx={{ flexGrow: 1, overflow: 'auto', mb: 2 }}>\r\n        <List>\r\n          {messages.map((message, index) => (\r\n            <ListItem key={index} sx={{ alignItems: 'flex-start' }}>\r\n              <ListItemText\r\n                primary={\r\n                  <Typography variant=\"subtitle2\" color={message.sender === 'user' ? 'primary' : 'secondary'}>\r\n                    {message.sender === 'user' ? 'You' : message.sender === 'ai' ? 'AI Orchestrator' : 'System'}\r\n                  </Typography>\r\n                }\r\n                secondary={\r\n                  <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-wrap' }}>\r\n                    {message.text}\r\n                  </Typography>\r\n                }\r\n              />\r\n            </ListItem>\r\n          ))}\r\n          <div ref={messagesEndRef} />\r\n        </List>\r\n      </Box>\r\n\r\n      <Divider sx={{ mb: 2 }} />\r\n\r\n      <Box sx={{ display: 'flex', gap: 1 }}>\r\n        <TextField\r\n          fullWidth\r\n          multiline\r\n          rows={2}\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyPress={handleKeyPress}\r\n          placeholder=\"Discuss project requirements with the AI...\"\r\n          variant=\"outlined\"\r\n        />\r\n        <Button variant=\"contained\" onClick={sendMessage} disabled={!input.trim()}>\r\n          Send\r\n        </Button>\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default ChatInterface;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}